
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Info about colour averaging</title>
    
  <link href="_static/css/theme.css" rel="stylesheet">
  <link href="_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystyles.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/togglebutton.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-R8Q003ZY5N"></script>
<script>
                    window.dataLayer = window.dataLayer || [];
                    function gtag(){ dataLayer.push(arguments); }
                    gtag('js', new Date());
                    gtag('config', 'G-R8Q003ZY5N');
                </script>

  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="_static/ACDElogo.png" class="logo" alt="logo">
      
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="intro.html">
   About
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Data infrastructure and integration
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="ivy_1_intro.html">
   Introduction
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="ivy_2_0_architecture.html">
   Australian Cultural Data Engine Architecture
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="ivy_2_1_overview_acdea.html">
     Overview of the Australian Cultural Data Engine Architecture
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="ivy_2_2_construction_overflow.html">
     Construction Workflow
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="ivy_2_3_data_report.html">
     Data Report
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="ivy_2_4_special_considerations.html">
     Special Considerations for Data Analysis
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="ivy_3_0_data_sources.html">
   Data Sources
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="ivy_3_1_ausstage.html">
     The Australian Live Performance Database
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="ivy_3_3_circusoz.html">
     The Circus Oz Living Archive collection
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="ivy_3_4_daao.html">
     Design &amp; Art Australia Online
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="ivy_3_5_daqa.html">
     Digital Archive of Queensland Architecture
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="ivy_3_6_summerhayes.html">
     Summerhayes Family Collection
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="ivy_4_integrated_data.html">
   Integrated Data
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="ivy_5_future_works.html">
   Future Works
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="ivy_7_more_interesting_works.html">
   More Interesting Works and Cultural Data Sources
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Data analysis
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="data_analysis_intro.html">
   Introduction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Analysis_DAAO500.html">
   The DAAO 500
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="TLC%20Workshop.html">
   TLC Workshop
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="DAQA%20Workshop.html">
   DAQA Workshop
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="DAQA%20Analysis.html">
   DAQA Analysis
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="CircusOzEDA.html">
   Circus Oz Analysis
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="AusStage.html">
   AusStage symposium
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="DAAO_Venues.html">
   DAAO venues and organisations
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Analysis_ArchibaldPrize.html">
   Archibald Prize
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/archies-color.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/acd-engine/jupyterbook"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/acd-engine/jupyterbook/issues/new?title=Issue%20on%20page%20%2Farchies-color.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/acd-engine/jupyterbook/master?urlpath=tree/docs/archies-color.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   Info about colour averaging
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#example">
     Example
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#info-about-colour-averaging-and-categorisation">
   Info about colour averaging and categorisation
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#step-1">
     Step 1
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#step-2">
     Step 2
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#step-3">
     Step 3
    </a>
   </li>
  </ul>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Info about colour averaging</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   Info about colour averaging
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#example">
     Example
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#info-about-colour-averaging-and-categorisation">
   Info about colour averaging and categorisation
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#step-1">
     Step 1
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#step-2">
     Step 2
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#step-3">
     Step 3
    </a>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <div class="section" id="info-about-colour-averaging">
<h1>Info about colour averaging<a class="headerlink" href="#info-about-colour-averaging" title="Permalink to this headline">¶</a></h1>
<p>An image can be summarized down into one average color by taking the average color of all pixels in the image.</p>
<ul class="simple">
<li><p>Each pixel in an image is represented by a combination of three color values: red, green, and blue (RGB).</p></li>
<li><p>The range of each value is usually from 0 to 255, representing the intensity of the color.</p></li>
</ul>
<p>To compute the average color of an image, the RGB values of each pixel are first extracted and then averaged across all pixels in the image. The resulting values represent the average color of the image.</p>
<div class="section" id="example">
<h2>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h2>
<p>An image is often represented as a two-dimensional array of numbers, where each number represents the intensity or color of a pixel. The size of the array corresponds to the dimensions of the image, and each element in the array corresponds to a pixel in the image.</p>
<p>For example, consider a simple grayscale image of size 4x4 pixels:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p></p></th>
<th class="head"><p>0</p></th>
<th class="head"><p>1</p></th>
<th class="head"><p>2</p></th>
<th class="head"><p>3</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>10</p></td>
<td><p>15</p></td>
<td><p>20</p></td>
<td><p>25</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>30</p></td>
<td><p>35</p></td>
<td><p>40</p></td>
<td><p>45</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>50</p></td>
<td><p>55</p></td>
<td><p>60</p></td>
<td><p>65</p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p>70</p></td>
<td><p>75</p></td>
<td><p>80</p></td>
<td><p>85</p></td>
</tr>
</tbody>
</table>
<p>In this case, the numbers in the array represent the intensity of each pixel, ranging from 0 (black) to 255 (white). For example, the pixel in the top-left corner of the image has an intensity of 10, while the pixel in the bottom-right corner has an intensity of 85.</p>
<p>For a color image, the array would have an extra dimension representing the color channels (usually red, green, and blue), resulting in a three-dimensional array. For example, a color image of size 4x4 pixels might be represented as:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p></p></th>
<th class="head"><p>0</p></th>
<th class="head"><p>1</p></th>
<th class="head"><p>2</p></th>
<th class="head"><p>3</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>[10, 20, 30]</p></td>
<td><p>[15, 25, 35]</p></td>
<td><p>[20, 30, 40]</p></td>
<td><p>[25, 35, 45]</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>[30, 40, 50]</p></td>
<td><p>[35, 45, 55]</p></td>
<td><p>[40, 50, 60]</p></td>
<td><p>[45, 55, 65]</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>[50, 60, 70]</p></td>
<td><p>[55, 65, 75]</p></td>
<td><p>[60, 70, 80]</p></td>
<td><p>[65, 75, 85]</p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p>[70, 80, 90]</p></td>
<td><p>[75, 85, 95]</p></td>
<td><p>[80, 90, 100]</p></td>
<td><p>[85, 95, 105]</p></td>
</tr>
</tbody>
</table>
<p>In this case, each pixel is represented by a three-element array, with each element representing the intensity of the red, green, and blue channels, respectively. For example, the pixel in the top-left corner of the image has a red intensity of 10, a green intensity of 20, and a blue intensity of 30.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">cv2</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>

<span class="c1"># Fetch colour data for every Archibald winning potrait</span>
<span class="k">def</span> <span class="nf">get_avg_color</span><span class="p">(</span><span class="n">img</span><span class="p">):</span>

    <span class="c1"># read image from file</span>
    <span class="n">myimg</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="s1">&#39;./images/ArchibaldWinners/&#39;</span> <span class="o">+</span> <span class="n">img</span><span class="p">)</span>

    <span class="c1"># convert to numpy array</span>
    <span class="n">avg_color_per_row</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">average</span><span class="p">(</span><span class="n">myimg</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="c1"># average the colors</span>
    <span class="n">avg_color</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">average</span><span class="p">(</span><span class="n">avg_color_per_row</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">avg_color</span>

<span class="c1"># sort files by name</span>
<span class="kn">from</span> <span class="nn">os</span> <span class="kn">import</span> <span class="n">listdir</span>
<span class="kn">from</span> <span class="nn">os.path</span> <span class="kn">import</span> <span class="n">isfile</span><span class="p">,</span> <span class="n">join</span>
<span class="n">onlyfiles</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">listdir</span><span class="p">(</span><span class="s1">&#39;./images/ArchibaldWinners&#39;</span><span class="p">)</span> <span class="k">if</span> <span class="n">isfile</span><span class="p">(</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;./images/ArchibaldWinners&#39;</span><span class="p">,</span> <span class="n">f</span><span class="p">))]</span>
<span class="n">onlyfiles</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>

<span class="c1"># change to dataframe</span>
<span class="n">of_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">onlyfiles</span><span class="p">)</span>

<span class="c1"># add year column and fix one-off error in 1991</span>
<span class="n">of_df</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">of_df</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]))</span>
<span class="n">of_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">of_df</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;1990_SID78808M.jpg.641x900_q85.jpg&#39;</span><span class="p">,</span><span class="s1">&#39;year&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1991</span>

<span class="c1"># add decade column</span>
<span class="n">of_df</span><span class="p">[</span><span class="s1">&#39;decade&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span> <span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">year</span><span class="p">)</span><span class="o">/</span><span class="mi">10</span><span class="p">)</span> <span class="o">*</span> <span class="mi">10</span><span class="p">)</span> 
                       <span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">of_df</span><span class="p">[</span><span class="s2">&quot;year&quot;</span><span class="p">])]</span>

<span class="c1"># add RGB columns for averaged colour</span>
<span class="n">of_df</span><span class="p">[[</span><span class="s1">&#39;r&#39;</span><span class="p">,</span><span class="s1">&#39;g&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">of_df</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="n">get_avg_color</span><span class="p">(</span><span class="n">x</span><span class="p">)))</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

<span class="c1"># add HEX column for averaged colour</span>
<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">of_df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;year&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">decade</span><span class="o">.</span><span class="n">unique</span><span class="p">():</span>

    <span class="c1"># sort by year</span>
    <span class="n">images_df_sorted</span> <span class="o">=</span> <span class="n">of_df</span><span class="p">[</span><span class="n">of_df</span><span class="o">.</span><span class="n">decade</span> <span class="o">==</span> <span class="n">x</span><span class="p">]</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;year&#39;</span><span class="p">)</span>

    <span class="c1"># convert RGB to HEX code</span>
    <span class="n">colors</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">images_df_sorted</span><span class="o">.</span><span class="n">r</span><span class="p">,</span> <span class="n">images_df_sorted</span><span class="o">.</span><span class="n">g</span><span class="p">,</span> <span class="n">images_df_sorted</span><span class="o">.</span><span class="n">b</span><span class="p">))</span>
    <span class="n">scaled_colours</span> <span class="o">=</span> <span class="p">[[</span><span class="n">color</span> <span class="o">/</span> <span class="mi">255</span> <span class="k">for</span> <span class="n">color</span> <span class="ow">in</span> <span class="n">row</span><span class="p">]</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">]</span>

    <span class="c1"># plot colour bars in order by decade</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="n">xmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">xmax</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">scaled_colours</span><span class="p">))</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">labelleft</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">bottom</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">labelbottom</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">colour</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">scaled_colours</span><span class="p">):</span> <span class="n">ax</span><span class="o">.</span><span class="n">axvspan</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">colour</span><span class="p">)</span>

    <span class="c1"># add year labels</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">FileNotFoundError</span><span class="g g-Whitespace">                         </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span> <span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">line</span> <span class="mi">22</span>
<span class="g g-Whitespace">     </span><span class="mi">20</span> <span class="kn">from</span> <span class="nn">os</span> <span class="kn">import</span> <span class="n">listdir</span>
<span class="g g-Whitespace">     </span><span class="mi">21</span> <span class="kn">from</span> <span class="nn">os.path</span> <span class="kn">import</span> <span class="n">isfile</span><span class="p">,</span> <span class="n">join</span>
<span class="ne">---&gt; </span><span class="mi">22</span> <span class="n">onlyfiles</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">listdir</span><span class="p">(</span><span class="s1">&#39;./images/ArchibaldWinners&#39;</span><span class="p">)</span> <span class="k">if</span> <span class="n">isfile</span><span class="p">(</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;./images/ArchibaldWinners&#39;</span><span class="p">,</span> <span class="n">f</span><span class="p">))]</span>
<span class="g g-Whitespace">     </span><span class="mi">23</span> <span class="n">onlyfiles</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
<span class="g g-Whitespace">     </span><span class="mi">25</span> <span class="c1"># change to dataframe</span>

<span class="ne">FileNotFoundError</span>: [Errno 2] No such file or directory: &#39;./images/ArchibaldWinners&#39;
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="info-about-colour-averaging-and-categorisation">
<h1>Info about colour averaging and categorisation<a class="headerlink" href="#info-about-colour-averaging-and-categorisation" title="Permalink to this headline">¶</a></h1>
<p>The below code is focused on extracting and categorising colors from a collection of images. It begins by importing various libraries, including PIL, OpenCV, and matplotlib, which are used for image manipulation and visualization, as well as external packages like extcolors and colormath for color extraction and categorization.</p>
<div class="section" id="step-1">
<h2>Step 1<a class="headerlink" href="#step-1" title="Permalink to this headline">¶</a></h2>
<p>The get_closest_color() function is used to determine the closest named color to a given RGB value using the CIE2000 algorithm, which measures the difference between two colors in terms of their perceived similarity. The color names and corresponding RGB values are stored in a color_map dictionary, which is created using the webcolors library.</p>
<p>The CIE2000 algorithm is named after the International Commission on Illumination (CIE), an organization that sets standards for color measurement and specification. The algorithm takes into account how colors are perceived by the human eye, including factors like brightness, saturation, and hue. It was developed to improve upon earlier color difference formulas, which were found to be inadequate for accurately describing how colors appear to the human eye.</p>
</div>
<div class="section" id="step-2">
<h2>Step 2<a class="headerlink" href="#step-2" title="Permalink to this headline">¶</a></h2>
<p>Next, the code reads in a list of image file names from a directory and uses the extcolors library to extract the dominant colors from each image. The extracted colors are then processed using the color_to_df() function to create a dataframe of color codes, occurrence frequencies, and proportions.</p>
<p>The code then ranks the colors by their proportion and assigns a color name using the get_closest_color() function and the color_map dictionary. The color_map dictionary is essentially a collection of named colors and their corresponding RGB values. In this code, the color_map dictionary is created using the webcolors library, which provides a list of 147 named colors and their corresponding RGB values in a convenient format. The reason the color_map dictionary is useful is that it allows the code to assign a human-readable name to each color it extracts from an image. For example, if the code extracts a color that is very close to (255, 0, 0), it can look up that RGB value in the color_map dictionary and see that it corresponds to the color name “red.” This makes it easier for humans to interpret and analyze the resulting data.</p>
</div>
<div class="section" id="step-3">
<h2>Step 3<a class="headerlink" href="#step-3" title="Permalink to this headline">¶</a></h2>
<p>Finally, the resulting color data is concatenated into a single dataframe for further analysis.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># # Takes 3 minutes to run</span>
<span class="c1"># import matplotlib.patches as patches</span>
<span class="c1"># import matplotlib.image as mpimg</span>

<span class="c1"># from PIL import Image</span>
<span class="c1"># from matplotlib.offsetbox import OffsetImage, AnnotationBbox</span>
<span class="c1"># import cv2</span>
<span class="c1"># import extcolors</span>

<span class="c1"># from colormap import rgb2hex</span>
<span class="c1"># from colormath.color_objects import sRGBColor, LabColor</span>
<span class="c1"># from colormath.color_conversions import convert_color</span>
<span class="c1"># from colormath.color_diff import delta_e_cie2000</span>
<span class="c1"># import webcolors</span>

<span class="c1"># # use webcolors to find closest color name</span>
<span class="c1"># def get_closest_color(requested_color, color_map):</span>
<span class="c1">#     requested_color = sRGBColor(*requested_color)</span>
<span class="c1">#     requested_color = convert_color(requested_color, LabColor)</span>

<span class="c1">#     min_distance = float(&quot;inf&quot;)</span>
<span class="c1">#     closest_color = None</span>
<span class="c1">#     for color_name, color_rgb in color_map.items():</span>
<span class="c1">#         color = sRGBColor(*color_rgb)</span>
<span class="c1">#         color = convert_color(color, LabColor)</span>
<span class="c1">#         distance = delta_e_cie2000(requested_color, color)</span>
<span class="c1">#         if distance &lt; min_distance:</span>
<span class="c1">#             min_distance = distance</span>
<span class="c1">#             closest_color = color_name</span>

<span class="c1">#     return closest_color</span>

<span class="c1"># # create dictionary of webcolors</span>
<span class="c1"># color_map = {color_name: webcolors.name_to_rgb(color_name) for color_name in webcolors.CSS3_NAMES_TO_HEX.keys()}</span>

<span class="c1"># from os import listdir</span>
<span class="c1"># from os.path import isfile, join</span>
<span class="c1"># onlyfiles = [f for f in listdir(&#39;./images/ArchibaldWinners&#39;) if isfile(join(&#39;./images/ArchibaldWinners&#39;, f))]</span>

<span class="c1"># # convert extcolors output to dataframe</span>
<span class="c1"># def color_to_df(input):</span>
<span class="c1">#     colors_pre_list = str(input).replace(&#39;([(&#39;,&#39;&#39;).split(&#39;, (&#39;)[0:-1]</span>
<span class="c1">#     df_rgb = [i.split(&#39;), &#39;)[0] + &#39;)&#39; for i in colors_pre_list]</span>
<span class="c1">#     df_percent = [i.split(&#39;), &#39;)[1].replace(&#39;)&#39;,&#39;&#39;) for i in colors_pre_list]</span>
    
<span class="c1">#     #convert RGB to HEX code</span>
<span class="c1">#     df_color_up = [rgb2hex(int(i.split(&quot;, &quot;)[0].replace(&quot;(&quot;,&quot;&quot;)),</span>
<span class="c1">#                           int(i.split(&quot;, &quot;)[1]),</span>
<span class="c1">#                           int(i.split(&quot;, &quot;)[2].replace(&quot;)&quot;,&quot;&quot;))) for i in df_rgb]</span>
    
<span class="c1">#     df = pd.DataFrame(zip(df_color_up, df_percent), columns = [&#39;c_code&#39;,&#39;occurence&#39;])</span>
<span class="c1">#     return df</span>

<span class="c1"># # create dataframe of colors</span>
<span class="c1"># df_colors = pd.DataFrame(columns = [&#39;c_code&#39;,&#39;occurence&#39;])</span>

<span class="c1"># # sort files by name</span>
<span class="c1"># onlyfiles.sort()</span>

<span class="c1"># # extract colors from images and add to dataframe</span>
<span class="c1"># for f in onlyfiles:</span>
<span class="c1">#     colors_x = extcolors.extract_from_path(&#39;./images/ArchibaldWinners/&#39; + f, </span>
<span class="c1">#                                            tolerance = 12, limit = 25)</span>
<span class="c1">#     df_color = color_to_df(colors_x)</span>
<span class="c1">#     df_color[&#39;proportion&#39;] = df_color[&#39;occurence&#39;].astype(float) / df_color[&#39;occurence&#39;].astype(float).sum()</span>
<span class="c1">#     df_color[&#39;rank&#39;] = df_color[&#39;proportion&#39;].rank(ascending=False)</span>
<span class="c1">#     df_color[&#39;color_name&#39;] = df_color.c_code.\</span>
<span class="c1">#         apply(lambda x: get_closest_color(webcolors.hex_to_rgb(x), color_map))</span>
<span class="c1">#     df_color[&#39;year&#39;] = f[:4]</span>
<span class="c1">#     df_colors = pd.concat([df_colors, df_color], ignore_index=True)</span>

<span class="c1"># df_colors.to_csv(&#39;data/Archibald_colors.csv&#39;, index=False)          </span>

<span class="c1"># Fetch colour data for every Archibald winning potrait</span>
<span class="n">df_colors</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;data/Archibald_colors.csv&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">matplotlib.ticker</span> <span class="k">as</span> <span class="nn">mtick</span>
<span class="kn">from</span> <span class="nn">matplotlib.ticker</span> <span class="kn">import</span> <span class="n">StrMethodFormatter</span>
<span class="kn">from</span> <span class="nn">webcolors</span> <span class="kn">import</span> <span class="n">CSS3_NAMES_TO_HEX</span>

<span class="c1"># create a new column for the year in 10 year intervals</span>
<span class="n">df_colors</span><span class="p">[</span><span class="s1">&#39;year_vicennium&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_colors</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">-</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">20</span><span class="p">)</span>
<span class="n">df_colors</span><span class="p">[</span><span class="s1">&#39;year_vicennium&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">df_colors</span><span class="p">[</span><span class="s1">&#39;year_vicennium&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2020</span><span class="p">,</span> <span class="mi">2000</span><span class="p">,</span> <span class="n">df_colors</span><span class="p">[</span><span class="s1">&#39;year_vicennium&#39;</span><span class="p">])</span>

<span class="c1"># create a new column for the proportion of colors in each year</span>
<span class="n">len_20_cols</span> <span class="o">=</span> <span class="n">df_colors</span><span class="p">[</span><span class="n">df_colors</span><span class="p">[</span><span class="s1">&#39;year_vicennium&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1920</span><span class="p">][</span><span class="s1">&#39;year&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">nunique</span><span class="p">()</span>
<span class="n">len_40_cols</span> <span class="o">=</span> <span class="n">df_colors</span><span class="p">[</span><span class="n">df_colors</span><span class="p">[</span><span class="s1">&#39;year_vicennium&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1940</span><span class="p">][</span><span class="s1">&#39;year&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">nunique</span><span class="p">()</span>
<span class="n">len_60_cols</span> <span class="o">=</span> <span class="n">df_colors</span><span class="p">[</span><span class="n">df_colors</span><span class="p">[</span><span class="s1">&#39;year_vicennium&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1960</span><span class="p">][</span><span class="s1">&#39;year&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">nunique</span><span class="p">()</span>
<span class="n">len_80_cols</span> <span class="o">=</span> <span class="n">df_colors</span><span class="p">[</span><span class="n">df_colors</span><span class="p">[</span><span class="s1">&#39;year_vicennium&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1980</span><span class="p">][</span><span class="s1">&#39;year&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">nunique</span><span class="p">()</span>
<span class="n">len_00_cols</span> <span class="o">=</span> <span class="n">df_colors</span><span class="p">[</span><span class="n">df_colors</span><span class="p">[</span><span class="s1">&#39;year_vicennium&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2000</span><span class="p">][</span><span class="s1">&#39;year&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">nunique</span><span class="p">()</span>
<span class="n">df_colors</span><span class="p">[</span><span class="s1">&#39;proportion2&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">df_colors</span><span class="p">[</span><span class="s1">&#39;year_vicennium&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1920</span><span class="p">,</span> <span class="n">df_colors</span><span class="p">[</span><span class="s1">&#39;proportion&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">len_20_cols</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>
<span class="n">df_colors</span><span class="p">[</span><span class="s1">&#39;proportion2&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">df_colors</span><span class="p">[</span><span class="s1">&#39;year_vicennium&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1940</span><span class="p">,</span> <span class="n">df_colors</span><span class="p">[</span><span class="s1">&#39;proportion&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">len_40_cols</span><span class="p">,</span> <span class="n">df_colors</span><span class="p">[</span><span class="s1">&#39;proportion2&#39;</span><span class="p">])</span>
<span class="n">df_colors</span><span class="p">[</span><span class="s1">&#39;proportion2&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">df_colors</span><span class="p">[</span><span class="s1">&#39;year_vicennium&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1960</span><span class="p">,</span> <span class="n">df_colors</span><span class="p">[</span><span class="s1">&#39;proportion&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">len_60_cols</span><span class="p">,</span> <span class="n">df_colors</span><span class="p">[</span><span class="s1">&#39;proportion2&#39;</span><span class="p">])</span>
<span class="n">df_colors</span><span class="p">[</span><span class="s1">&#39;proportion2&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">df_colors</span><span class="p">[</span><span class="s1">&#39;year_vicennium&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1980</span><span class="p">,</span> <span class="n">df_colors</span><span class="p">[</span><span class="s1">&#39;proportion&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">len_80_cols</span><span class="p">,</span> <span class="n">df_colors</span><span class="p">[</span><span class="s1">&#39;proportion2&#39;</span><span class="p">])</span>
<span class="n">df_colors</span><span class="p">[</span><span class="s1">&#39;proportion2&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">df_colors</span><span class="p">[</span><span class="s1">&#39;year_vicennium&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2000</span><span class="p">,</span> <span class="n">df_colors</span><span class="p">[</span><span class="s1">&#39;proportion&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">len_00_cols</span><span class="p">,</span> <span class="n">df_colors</span><span class="p">[</span><span class="s1">&#39;proportion2&#39;</span><span class="p">])</span>

<span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">df_colors</span><span class="p">[</span><span class="s1">&#39;year_vicennium&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">():</span>
    <span class="c1"># get the top 5 colors for each year</span>
    <span class="n">top5cols</span> <span class="o">=</span> <span class="n">df_colors</span><span class="p">[</span><span class="n">df_colors</span><span class="o">.</span><span class="n">year_vicennium</span> <span class="o">==</span> <span class="n">y</span><span class="p">]</span>\
                <span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;year_vicennium&#39;</span><span class="p">,</span><span class="s1">&#39;color_name&#39;</span><span class="p">])</span>\
                <span class="o">.</span><span class="n">agg</span><span class="p">({</span><span class="s1">&#39;proportion2&#39;</span><span class="p">:</span><span class="s1">&#39;sum&#39;</span><span class="p">})</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>\
                <span class="o">.</span><span class="n">sort_values</span><span class="p">([</span><span class="s1">&#39;year_vicennium&#39;</span><span class="p">,</span><span class="s1">&#39;proportion2&#39;</span><span class="p">],</span> <span class="n">ascending</span><span class="o">=</span><span class="p">[</span><span class="kc">True</span><span class="p">,</span><span class="kc">False</span><span class="p">])</span>\
                <span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;year_vicennium&#39;</span><span class="p">)</span>\
                <span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)[</span><span class="s1">&#39;color_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>

    <span class="n">df_colors_top5</span> <span class="o">=</span> <span class="n">df_colors</span><span class="p">[</span><span class="n">df_colors</span><span class="o">.</span><span class="n">color_name</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">top5cols</span><span class="p">)]</span>\
                <span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;year_vicennium&#39;</span><span class="p">,</span><span class="s1">&#39;color_name&#39;</span><span class="p">])</span>\
                <span class="o">.</span><span class="n">agg</span><span class="p">({</span><span class="s1">&#39;proportion2&#39;</span><span class="p">:</span><span class="s1">&#39;sum&#39;</span><span class="p">})</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>\
                <span class="o">.</span><span class="n">sort_values</span><span class="p">([</span><span class="s1">&#39;year_vicennium&#39;</span><span class="p">,</span><span class="s1">&#39;proportion2&#39;</span><span class="p">],</span> <span class="n">ascending</span><span class="o">=</span><span class="p">[</span><span class="kc">True</span><span class="p">,</span><span class="kc">False</span><span class="p">])</span>\
                <span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;year_vicennium&#39;</span><span class="p">)</span>\
                <span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>

    <span class="n">df_colors_top5_pivot</span> <span class="o">=</span> <span class="n">df_colors_top5</span>\
        <span class="o">.</span><span class="n">pivot</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s1">&#39;year_vicennium&#39;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="s1">&#39;color_name&#39;</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="s1">&#39;proportion2&#39;</span><span class="p">)</span>\
        <span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

    <span class="c1"># create a new column for the RGB values of each color</span>
    <span class="n">df_colors_top5</span><span class="p">[</span><span class="s1">&#39;red&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_colors_top5</span><span class="p">[</span><span class="s1">&#39;color_name&#39;</span><span class="p">]</span>\
        <span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">CSS3_NAMES_TO_HEX</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">],</span> <span class="mi">16</span><span class="p">))</span>
    <span class="n">df_colors_top5</span><span class="p">[</span><span class="s1">&#39;green&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_colors_top5</span><span class="p">[</span><span class="s1">&#39;color_name&#39;</span><span class="p">]</span>\
        <span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">CSS3_NAMES_TO_HEX</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">3</span><span class="p">:</span><span class="mi">5</span><span class="p">],</span> <span class="mi">16</span><span class="p">))</span>
    <span class="n">df_colors_top5</span><span class="p">[</span><span class="s1">&#39;blue&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_colors_top5</span><span class="p">[</span><span class="s1">&#39;color_name&#39;</span><span class="p">]</span>\
        <span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">CSS3_NAMES_TO_HEX</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="mi">5</span><span class="p">:],</span> <span class="mi">16</span><span class="p">))</span>

    <span class="c1"># Define a list of column names to order by</span>
    <span class="n">ordered_columns</span> <span class="o">=</span> <span class="n">df_colors_top5</span>\
        <span class="o">.</span><span class="n">sort_values</span><span class="p">([</span><span class="s1">&#39;red&#39;</span><span class="p">,</span><span class="s1">&#39;green&#39;</span><span class="p">,</span><span class="s1">&#39;blue&#39;</span><span class="p">],</span> <span class="n">ascending</span><span class="o">=</span><span class="p">[</span><span class="kc">True</span><span class="p">,</span><span class="kc">True</span><span class="p">,</span><span class="kc">True</span><span class="p">])[</span><span class="s1">&#39;color_name&#39;</span><span class="p">]</span>\
        <span class="o">.</span><span class="n">unique</span><span class="p">()</span>

    <span class="c1"># Reorder the columns</span>
    <span class="n">df_colors_top5_pivot</span> <span class="o">=</span> <span class="n">df_colors_top5_pivot</span><span class="o">.</span><span class="n">reindex</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">ordered_columns</span><span class="p">)</span>

    <span class="c1"># plot stacked area chart</span>
    <span class="n">df_colors_top5_pivot</span>\
        <span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">area</span><span class="p">(</span><span class="n">stacked</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">5</span><span class="p">),</span> 
        <span class="n">color</span><span class="o">=</span><span class="n">df_colors_top5_pivot</span><span class="o">.</span><span class="n">columns</span><span class="p">,</span> 
        <span class="n">alpha</span><span class="o">=</span><span class="mf">0.825</span><span class="p">)</span>

    <span class="c1"># add labels for sum of proportions for each year</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">x</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">df_colors_top5_pivot</span><span class="o">.</span><span class="n">index</span><span class="p">):</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">df_colors_top5_pivot</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">+</span><span class="mf">0.05</span><span class="p">,</span>
        <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">df_colors_top5_pivot</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="si">:</span><span class="s1">.0%</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> 
        <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;upper center&#39;</span><span class="p">,</span> <span class="n">ncol</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">))</span>

    <span class="c1"># Set the y-axis limts</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.85</span><span class="p">)</span>

    <span class="c1"># Set the y-axis formatter to show percentages</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">mtick</span><span class="o">.</span><span class="n">PercentFormatter</span><span class="p">(</span><span class="mf">1.0</span><span class="p">))</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">([</span><span class="mi">1920</span><span class="p">,</span><span class="mi">1940</span><span class="p">,</span><span class="mi">1960</span><span class="p">,</span><span class="mi">1980</span><span class="p">,</span><span class="mi">2000</span><span class="p">],</span> 
    <span class="p">[</span><span class="s1">&#39;1920-1940&#39;</span><span class="p">,</span> <span class="s1">&#39;1940-1960&#39;</span><span class="p">,</span> <span class="s1">&#39;1960-1980&#39;</span><span class="p">,</span><span class="s1">&#39;1980-2000&#39;</span><span class="p">,</span> <span class="s1">&#39;2000-&#39;</span><span class="p">])</span>

    <span class="k">if</span> <span class="n">y</span> <span class="o">==</span> <span class="mi">2000</span><span class="p">:</span> <span class="n">plus20</span> <span class="o">=</span> <span class="mi">2022</span>
    <span class="k">else</span><span class="p">:</span> <span class="n">plus20</span> <span class="o">=</span> <span class="n">y</span> <span class="o">+</span> <span class="mi">20</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Proportion of top five colors in Archibald winning portraits during </span><span class="si">{</span><span class="n">y</span><span class="si">}</span><span class="s1">-</span><span class="si">{</span><span class="n">plus20</span><span class="si">}</span><span class="s1">, 20-year periods</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="p">)</span>
    
    
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/archies-color_4_0.png" src="_images/archies-color_4_0.png" />
<img alt="_images/archies-color_4_1.png" src="_images/archies-color_4_1.png" />
<img alt="_images/archies-color_4_2.png" src="_images/archies-color_4_2.png" />
<img alt="_images/archies-color_4_3.png" src="_images/archies-color_4_3.png" />
<img alt="_images/archies-color_4_4.png" src="_images/archies-color_4_4.png" />
</div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By Australian Cultural Data Engine<br/>
    
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>